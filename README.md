# microservices-sample
Тестовый проект микросервисов уведомлений. 
Содержит 3 микросервиса pushservice, smsservice и emailservice для симуляции отправки sms, push и email уведомлений. Отправка симулируется методом написания в лог. 
Запросы на отправку направляются через gateway сервис, который распределяет их по типу уведомления на соответствующий сервис. Проект использует Eureka Service Discovery,
gateway узнает адреса сервисов через него.
Отправленные уведомления сохраняются в единую БД Mongo и автоматически удаляются через неделю. 

Также включен проект Test с базовыми тестами для этих сервисов.

Проект можно запускать как в Docker так и локально. Конфигурацию портов для Docker можно менять в .env файле, для локального запуска в application.properties
каждого проекта. 

По умолчанию запросы ожидаются на порте 8080 для обеих конфигураций. Запросы подаются через REST, и ожидают json следующего  формата:

{"text": "Notification text"}

Дата и тип уведомления добавляются автоматически. 

Поддерживаемые типы запросов:

POST:

http://localhost:8080/email/send - отправка email уведомления

http://localhost:8080/push/send - отправка push уведомления

http://localhost:8080/sms/send - отправка sms уведомления

GET:

http://localhost:8080/email/readall - вывести все email уведомления

http://localhost:8080/push/readall - вывести все push уведомления

http://localhost:8080/sms/readall - вывести все sms уведомления

Компиляция для Docker

-Запустите .\mvnw package -DskipTests в корне каждого проекта кроме проекта Test(он не является сервисом). Аргумент -DskipTests должен присутствовать, иначе mvnw попытается запустить
сервис, но он не запустится если не сможет подключится к БД и компиляция отменится. 

-Запустите  docker-compose up из общего корня. Через некоторе время сервисы должны запустится. 

-Откройте http://localhost:8761/, там должно быть видно каждый из 4х сервисов:

      EMAIL-NOTIFICATION

      GATEWAY-SERVICE

      PUSH-NOTIFICATION

      SMS-NOTIFICATION
  
-Можно делать запросы!
